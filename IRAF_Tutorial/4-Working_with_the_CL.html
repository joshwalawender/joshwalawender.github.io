<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    
    <meta name="Generator" content="iWeb 3.0.4" />
    <meta name="iWeb-Build" content="local-build-20120703" />
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
    <meta name="viewport" content="width=700" />
    <title>Working with the CL</title>
    <link rel="stylesheet" type="text/css" media="screen,print" href="4-Working_with_the_CL_files/4-Working_with_the_CL.css" />
    <!--[if lt IE 8]><link rel='stylesheet' type='text/css' media='screen,print' href='4-Working_with_the_CL_files/4-Working_with_the_CLIE.css'/><![endif]-->
    <!--[if gte IE 8]><link rel='stylesheet' type='text/css' media='screen,print' href='Media/IE8.css'/><![endif]-->
    <script type="text/javascript" src="Scripts/iWebSite.js"></script>
    <script type="text/javascript" src="Scripts/Widgets/SharedResources/WidgetCommon.js"></script>
    <script type="text/javascript" src="Scripts/Widgets/Navbar/navbar.js"></script>
    <script type="text/javascript" src="4-Working_with_the_CL_files/4-Working_with_the_CL.js"></script>
  </head>
  <body style="background: rgb(255, 255, 255) url(4-Working_with_the_CL_files/PhotoGray_browser_bg-2.jpg) repeat scroll top left; margin: 0pt; " onload="onPageLoad();" onunload="onPageUnload();">
    <div style="text-align: center; ">
      <div style="margin-bottom: 0px; margin-left: auto; margin-right: auto; margin-top: 0px; overflow: hidden; position: relative; word-wrap: break-word;  text-align: left; width: 700px; " id="body_content">
        <div style="background: transparent url(4-Working_with_the_CL_files/PhotoGray_bg_c-1.jpg) repeat scroll top left; width: 700px; ">
          <div style="margin-left: 0px; position: relative; width: 700px; z-index: 0; " id="nav_layer">
            <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
            <div style="height: 700px; width: 700px;  height: 700px; left: 0px; position: absolute; top: -80px; width: 700px; z-index: 1; " class="tinyText style_SkipStroke">
              <img src="4-Working_with_the_CL_files/Darkroom_spotlight.jpg" alt="" style="border: none; height: 700px; width: 700px; " />
            </div>
            <div style="height: 1px; line-height: 1px; " class="tinyText"> </div>
            <div class="com-apple-iweb-widget-navbar flowDefining" id="widget0" style="margin-left: 0px; margin-top: 19px; opacity: 1.00; position: relative; width: 700px; z-index: 1; ">
    
              <div id="widget0-navbar" class="navbar">

      
                <div id="widget0-bg" class="navbar-bg">

        
                  <ul id="widget0-navbar-list" class="navbar-list">
 <li></li> 
</ul>
                  
      
</div>
                
    
</div>
            </div>
            <script type="text/javascript"><!--//--><![CDATA[//><!--
new NavBar('widget0', 'Scripts/Widgets/Navbar', 'Scripts/Widgets/SharedResources', '.', {"path-to-root": "", "navbar-css": ".navbar {\n\tfont-family: Futura, 'Trebuchet MS', sans-serif;\n\ttext-transform: uppercase;\n\tfont-size: .7em;\n\tcolor: #C1C1C1;\n\tline-height: 25px;\n\ttext-align: center;\n\tpadding: 0px;\n\tbackground-image: url(4-Working_with_the_CL_files\/PhotoGray_nav_bg.png);\n\t_background-image: url(4-Working_with_the_CL_files\/PhotoGray_nav_bg.jpg);\n\tbackground-repeat: repeat-y;\n\tborder-top: 1px solid #999;\n\tborder-bottom: 1px solid #999;\n}\n\n.navbar-bg {\n\tpadding: 6px 0px 4px 0px;\n}\n\n.navbar ul {\n\tlist-style: none;\n\tmargin: 0px;\n\tpadding: 0px 10px 0px 10px;\n}\n\n.navbar ul li {\n\tdisplay: inline; \n\tlist-style-type: none;\n\tmargin: 0px;\n\tpadding: 0px 10px 0px 10px;\n}\n\n\n.noncurrent-page  a:visited {\n\ttext-decoration: none;\n\tcolor: #C1C1C1;\n\ttext-shadow: 0px -1px 2px #333;\n}\n\n.noncurrent-page  a {\n\ttext-decoration: none;\n\tcolor: #C1C1C1;\n\ttext-shadow: 0px -1px 2px #333;\n}\n\n\n.noncurrent-page a:hover {\n\ttext-decoration: none;\n\tcolor: #EC001E;\n\ttext-shadow: 0px -1px 2px #333;\n}\n\n.current-page a\n{\n\ttext-decoration: none;\n\tcolor: #000;\n\ttext-shadow: 0px -1px 2px #7E7E7E;\n}\n\n.current-page a:visited\n{\n\ttext-decoration: none;\n\tcolor: #000;\n\ttext-shadow: 0px -1px 2px #7E7E7E;\n}\n\n", "current-page-GUID": "4BF4C4C2-07AA-4890-BC50-E96A4D9A26A9", "isCollectionPage": "NO"});
//--><!]]></script>
            <div style="clear: both; height: 0px; line-height: 0px; " class="spacer"> </div>
          </div>
          <div style="height: 63px; margin-left: 0px; position: relative; width: 700px; z-index: 10; " id="header_layer">
            <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
            <div id="id1" style="height: 50px; left: 30px; position: absolute; top: 13px; width: 640px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
              <div class="text-content Normal_External_640_50" style="padding: 0px; ">
                <div class="Normal">
                  <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Header">Working with the CL</p>
                </div>
              </div>
            </div>
          </div>
          <div style="margin-left: 0px; position: relative; width: 700px; z-index: 5; " id="body_layer">
            <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
            <div id="id2" style="height: 3462px; left: 25px; position: absolute; top: 11px; width: 650px; z-index: 1; " class="style_SkipStroke_2 shape-with-text">
              <div class="text-content graphic_textbox_layout_style_default_External_650_3462" style="padding: 0px; ">
                <div class="graphic_textbox_layout_style_default">
                  <p style="padding-top: 0pt; " class="paragraph_style">Input Lists<br /></p>
                  <p class="paragraph_style_1"><br /></p>
                  <p class="paragraph_style_1">Many times we will want to run an IRAF task on several images. One way to do so is to give a comma separated list for the input. IRAF interprets spaces as separating different inputs, so be sure not to leave any spaces in the list of input images.  <span class="style">This also means that you can’t use spaces in the file and folder names of things you would like to access in IRAF.<br /></span></p>
                  <p class="paragraph_style_1"><br /></p>
                  <p class="paragraph_style_2">cl&gt; imstat NGC4945-002_L,NGC4945-003_L,NGC4945-004_L<br /></p>
                  <p class="paragraph_style_2">#               IMAGE      MODE      MEAN    STDDEV       MIN       MAX<br /></p>
                  <p class="paragraph_style_2">        NGC4945-002_L     1529.     1588.     1361.     1334.    65535.<br /></p>
                  <p class="paragraph_style_2">        NGC4945-003_L     1519.     1577.     1354.     1327.    65535.<br /></p>
                  <p class="paragraph_style_2">        NGC4945-004_L     1524.     1583.     1361.     1338.    65535.<br /></p>
                  <p class="paragraph_style_1"><br /></p>
                  <p class="paragraph_style_1">You can also use wildcards in your input:<br /></p>
                  <p class="paragraph_style_1"><br /></p>
                  <p class="paragraph_style_2">cl&gt; imstat NGC4945*      <br /></p>
                  <p class="paragraph_style_2">#               IMAGE      MODE      MEAN    STDDEV       MIN       MAX<br /></p>
                  <p class="paragraph_style_2">   NGC4945-001_B.fits     1170.     1200.     841.7     1044.    65535.<br /></p>
                  <p class="paragraph_style_2">   NGC4945-001_G.fits     1237.     1279.      923.     1097.    65535.<br /></p>
                  <p class="paragraph_style_2">   NGC4945-001_R.fits     1272.     1298.      948.     1137.    65535.<br /></p>
                  <p class="paragraph_style_2">   NGC4945-002_B.fits     1177.     1194.     823.2     1060.    65535.<br /></p>
                  <p class="paragraph_style_2">   NGC4945-002_G.fits     1216.     1277.     913.9     1070.    65535.<br /></p>
                  <p class="paragraph_style_2">   NGC4945-002_L.fits     1529.     1588.     1361.     1334.    65535.<br /></p>
                  <p class="paragraph_style_2">   NGC4945-002_R.fits     1250.     1287.     936.2     1110.    65535.<br /></p>
                  <p class="paragraph_style_2">   NGC4945-003_B.fits     1168.     1189.     792.6     1051.    65535.<br /></p>
                  <p class="paragraph_style_2">   NGC4945-003_G.fits     1247.     1271.     888.6     1119.    65535.<br /></p>
                  <p class="paragraph_style_2">   NGC4945-003_L.fits     1519.     1577.     1354.     1327.    65535.<br /></p>
                  <p class="paragraph_style_2">   NGC4945-003_R.fits     1251.     1285.     921.2     1114.    65535.<br /></p>
                  <p class="paragraph_style_2">   NGC4945-004_L.fits     1524.     1583.     1361.     1338.    65535.<br /></p>
                  <p class="paragraph_style_1"><br /></p>
                  <p class="paragraph_style_1">The last option is to generate a list file. A list file is just a text file which contains the filenames you want to operate on, placing one file name per line. You could generate it using any text editor you choose. To tell IRAF that the input is a list file, prepend an @ symbol like so:<br /></p>
                  <p class="paragraph_style_1"><br /></p>
                  <p class="paragraph_style_2">cl&gt; imstat @list_NGC4945.txt <br /></p>
                  <p class="paragraph_style_2">#               IMAGE      MODE      MEAN    STDDEV       MIN       MAX<br /></p>
                  <p class="paragraph_style_2">   NGC4945-001_B.fits     1170.     1200.     841.7     1044.    65535.<br /></p>
                  <p class="paragraph_style_2">   NGC4945-001_G.fits     1237.     1279.      923.     1097.    65535.<br /></p>
                  <p class="paragraph_style_2">   NGC4945-001_R.fits     1272.     1298.      948.     1137.    65535.<br /></p>
                  <p class="paragraph_style_2">   NGC4945-002_B.fits     1177.     1194.     823.2     1060.    65535.<br /></p>
                  <p class="paragraph_style_2">   NGC4945-002_G.fits     1216.     1277.     913.9     1070.    65535.<br /></p>
                  <p class="paragraph_style_2">   NGC4945-002_L.fits     1529.     1588.     1361.     1334.    65535.<br /></p>
                  <p class="paragraph_style_2">   NGC4945-002_R.fits     1250.     1287.     936.2     1110.    65535.<br /></p>
                  <p class="paragraph_style_2">   NGC4945-003_B.fits     1168.     1189.     792.6     1051.    65535.<br /></p>
                  <p class="paragraph_style_2">   NGC4945-003_G.fits     1247.     1271.     888.6     1119.    65535.<br /></p>
                  <p class="paragraph_style_2">   NGC4945-003_L.fits     1519.     1577.     1354.     1327.    65535.<br /></p>
                  <p class="paragraph_style_2">   NGC4945-003_R.fits     1251.     1285.     921.2     1114.    65535.<br /></p>
                  <p class="paragraph_style_2">   NGC4945-004_L.fits     1524.     1583.     1361.     1338.    65535.<br /></p>
                  <p class="paragraph_style_1"><br /></p>
                  <p class="paragraph_style_1">There is an easy way to generate such files using the files task within IRAF. The <span class="style_1">files</span> task is similar to <span class="style_1">ls</span> in UNIX, but it outputs one filename per line as a list file should contain. Here is an example of the output of <span class="style_1">files</span>:<br /></p>
                  <p class="paragraph_style_1"><br /></p>
                  <p class="paragraph_style_2">cl&gt; files NGC4945*                   <br /></p>
                  <p class="paragraph_style_2">NGC4945-001_B.fits<br /></p>
                  <p class="paragraph_style_2">NGC4945-001_G.fits<br /></p>
                  <p class="paragraph_style_2">NGC4945-001_R.fits<br /></p>
                  <p class="paragraph_style_2">NGC4945-002_B.fits<br /></p>
                  <p class="paragraph_style_2">NGC4945-002_G.fits<br /></p>
                  <p class="paragraph_style_2">NGC4945-002_L.fits<br /></p>
                  <p class="paragraph_style_2">NGC4945-002_R.fits<br /></p>
                  <p class="paragraph_style_2">NGC4945-003_B.fits<br /></p>
                  <p class="paragraph_style_2">NGC4945-003_G.fits<br /></p>
                  <p class="paragraph_style_2">NGC4945-003_L.fits<br /></p>
                  <p class="paragraph_style_2">NGC4945-003_R.fits<br /></p>
                  <p class="paragraph_style_2">NGC4945-004_L.fits<br /></p>
                  <p class="paragraph_style_1"><br /></p>
                  <p class="paragraph_style_1">The list is simply printed to the screen. To make a list file we want the output to go to a file. We can do this using redirection commands (which work similarly in IRAF to redirection commands in UNIX). To redirect to a file, we use append a &gt; and the file name to the command. <span class="style">Be aware that, like most IRAF tasks, the &gt; redirection will not overwrite files, so there cannot already be a file with that name.</span> If there is a pre-existing file with that name, you must delete it first or you will get and error message,  <br /></p>
                  <p class="paragraph_style_1">The <span class="style_1">type</span> and <span class="style_1">page</span> commands in IRAF will print the contents of a text file to the screen (similar to cat and more in UNIX respectively), we can use those to check that out list file contains what we wanted.<br /></p>
                  <p class="paragraph_style_1"><br /></p>
                  <p class="paragraph_style_2">cl&gt; files NGC4945* &gt; list_NGC4945.txt<br /></p>
                  <p class="paragraph_style_2">cl&gt; type list_NGC4945.txt <br /></p>
                  <p class="paragraph_style_2">NGC4945-001_B.fits<br /></p>
                  <p class="paragraph_style_2">NGC4945-001_G.fits<br /></p>
                  <p class="paragraph_style_2">NGC4945-001_R.fits<br /></p>
                  <p class="paragraph_style_2">NGC4945-002_B.fits<br /></p>
                  <p class="paragraph_style_2">NGC4945-002_G.fits<br /></p>
                  <p class="paragraph_style_2">NGC4945-002_L.fits<br /></p>
                  <p class="paragraph_style_2">NGC4945-002_R.fits<br /></p>
                  <p class="paragraph_style_2">NGC4945-003_B.fits<br /></p>
                  <p class="paragraph_style_2">NGC4945-003_G.fits<br /></p>
                  <p class="paragraph_style_2">NGC4945-003_L.fits<br /></p>
                  <p class="paragraph_style_2">NGC4945-003_R.fits<br /></p>
                  <p class="paragraph_style_2">NGC4945-004_L.fits<br /></p>
                  <p class="paragraph_style_1"><br /></p>
                  <p class="paragraph_style_1">You can also explore the use of the UNIX commands for text editing to change the output of the files task. <span class="style_1">grep</span> is very useful, <span class="style_1">sed</span>, and <span class="style_1">awk</span> can also be used. For example:<br /></p>
                  <p class="paragraph_style_1"><br /></p>
                  <p class="paragraph_style_2">cl&gt; files NGC4945* | grep L &gt; list_NGC4945_L.txt<br /></p>
                  <p class="paragraph_style_2">cl&gt; type list_NGC4945_L.txt <br /></p>
                  <p class="paragraph_style_2">NGC4945-002_L.fits<br /></p>
                  <p class="paragraph_style_2">NGC4945-003_L.fits<br /></p>
                  <p class="paragraph_style_2">NGC4945-004_L.fits<br /></p>
                  <p class="paragraph_style_1"><br /></p>
                  <p class="paragraph_style_1">The last task could also be accomplished with wildcards.<br /></p>
                  <p class="paragraph_style_1"><br /></p>
                  <p class="paragraph_style_2">cl&gt; files NGC4945*L.fits &gt; list_NGC4945_L.txt<br /></p>
                  <p class="paragraph_style_2">cl&gt; type list_NGC4945_L.txt <br /></p>
                  <p class="paragraph_style_2">NGC4945-002_L.fits<br /></p>
                  <p class="paragraph_style_2">NGC4945-003_L.fits<br /></p>
                  <p class="paragraph_style_2">NGC4945-004_L.fits<br /></p>
                  <p class="paragraph_style_1"><br /></p>
                  <p class="paragraph_style">CL History<br /></p>
                  <p class="paragraph_style"><br /></p>
                  <p class="paragraph_style_1">One other convenience in the IRAF CL is command history. In UNIX, we use the up-arrow to scroll back through previous commands. IRAF support for up-arrow call back of commands has been implemented in recent versions which technically use a new interface called the “enhanced CL”.  If your IRAF prompt is ecl&gt; instead of cl&gt; then you probably have the callback feature and tab completion features of the ECL available to you.<br /></p>
                  <p class="paragraph_style_1"><br /></p>
                  <p class="paragraph_style_1">In addition to up-arrow callback, we have the <span class="style_1">ehistory</span> command. To invoke, just type <span class="style_1">ehist</span> or sometimes just e at the CL. Then use the up arrow to scroll back through old commands, hit enter to rerun a command, you can also edit commands before running them, to exit <span class="style_1">ehist</span> without running a command, hit CTRL-c.<br /></p>
                  <p class="paragraph_style_1"><br /></p>
                  <p class="paragraph_style_1">You can also call back the last occurrence of a command, by using <span class="style_1">ehist text</span>, then the <span class="style_1">ehist</span> list will jump to the last occurrence of a command which began with &quot;text&quot; (or whatever you place there).  For example, I can call back the last display command after running several other commands in between:<br /></p>
                  <p class="paragraph_style_1"><br /></p>
                  <p class="paragraph_style_2">ecl&gt; files NGC4945*L.fits &gt; list_NGC4945_L.txt<br /></p>
                  <p class="paragraph_style_2">ecl&gt; type list_NGC4945_L.txt<br /></p>
                  <p class="paragraph_style_2">NGC4945-002_L.fits<br /></p>
                  <p class="paragraph_style_2">NGC4945-003_L.fits<br /></p>
                  <p class="paragraph_style_2">NGC4945-004_L.fits<br /></p>
                  <p class="paragraph_style_2">ecl&gt; ehist displ<br /></p>
                  <p class="paragraph_style_2">displ NGC4945-002_L 1 zsc- z1=1350 z2=2500<br /></p>
                  <p class="paragraph_style_1"><br /></p>
                  <p class="paragraph_style">Image Subsections<br /></p>
                  <p class="paragraph_style"><br /></p>
                  <p class="paragraph_style_1">You can operate on sections of images if you like. To describe the subset of pixels that you want to work on, use the following format: <span class="style_1">cl&gt; imstat imagename[x1:x2,y1:y2]</span> where x1 and x2 are the x range, y1 and y2 are the y range of pixels. For example, you can use <span class="style_1">imcopy</span> to create a new image which is the subsection of a larger image:<br /></p>
                  <p class="paragraph_style_1"><br /></p>
                  <p class="paragraph_style_2">ecl&gt; imcopy NGC4945-002_L[350:1150,450:850] NGC4945_crop<br /></p>
                  <p class="paragraph_style_2">NGC4945-002_L[350:1150,450:850] -&gt; NGC4945_crop<br /></p>
                  <p class="paragraph_style_2">ecl&gt; displ NGC4945_crop 2<br /></p>
                  <p class="paragraph_style_2">z1=1422. z2=1794.951<br /></p>
                  <p class="paragraph_style_1"><br /></p>
                  <p class="paragraph_style">CL Scripts<br /></p>
                  <p class="paragraph_style"><br /></p>
                  <p class="paragraph_style_1">In using IRAF, you may wish to script a set of commands which can be run in sequence with one command. To do so, we compose a CL script, which is a text file usually ending in .cl. We can run the script by redirecting it to the cl using the &lt; redirection command.<br /></p>
                  <p class="paragraph_style_1"><br /></p>
                  <p class="paragraph_style_1">For example, if we create a text file called <span class="style_1">myscript.cl</span> which contains the following lines<br /></p>
                  <p class="paragraph_style_1"><br /></p>
                  <p class="paragraph_style_2">imcopy NGC4945-002_L[350:1150,450:850] NGC4945_crop<br /></p>
                  <p class="paragraph_style_2">displ NGC4945_crop 2<br /></p>
                  <p class="paragraph_style_2">imstat NGC4945-002_L,NGC4945_crop<br /></p>
                  <p class="paragraph_style_1"><br /></p>
                  <p class="paragraph_style_1">Then we run it using<br /></p>
                  <p class="paragraph_style_1"><br /></p>
                  <p class="paragraph_style_2">cl&gt; cl &lt; myscript.cl <br /></p>
                  <p class="paragraph_style_2">NGC4945-002_L[350:1150,450:850] -&gt; NGC4945_crop<br /></p>
                  <p class="paragraph_style_2">z1=1422. z2=1794.951<br /></p>
                  <p class="paragraph_style_2">#               IMAGE      MODE      MEAN    STDDEV       MIN       MAX<br /></p>
                  <p class="paragraph_style_2">        NGC4945-002_L     1529.     1588.     1361.     1334.    65535.<br /></p>
                  <p class="paragraph_style_2">         NGC4945_crop     1507.     1594.     964.7     1358.    65535.<br /></p>
                  <p class="paragraph_style_1"><br /></p>
                  <p class="paragraph_style_1">We can also add comments to our scripts with the # symbol. Anything following the # symbol on a line is interpreted as a comment. For example, our text file myscript.cl could also be written<br /></p>
                  <p class="paragraph_style_1"><br /></p>
                  <p class="paragraph_style_2"># Copy the central part of the image to another fits file<br /></p>
                  <p class="paragraph_style_2">imcopy NGC4945-002_L[350:1150,450:850] NGC4945_crop<br /></p>
                  <p class="paragraph_style_2"># Display the cropped image<br /></p>
                  <p class="paragraph_style_2">displ NGC4945_crop 2<br /></p>
                  <p class="paragraph_style_2">#Show the statistics of the uncropped and cropped images<br /></p>
                  <p class="paragraph_style_2">imstat NGC4945-002_L,NGC4945_crop<br /></p>
                  <p class="paragraph_style_1"><br /></p>
                  <p style="padding-bottom: 0pt; " class="paragraph_style_1">This script runs the identical commands as the example above, but with comments which will make it easier to interpret later on.</p>
                </div>
              </div>
            </div>
            <div style="height: 3473px; line-height: 3473px; " class="spacer"> </div>
          </div>
          <div style="height: 150px; margin-left: 0px; position: relative; width: 700px; z-index: 15; " id="footer_layer">
            <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
            <div id="id3" style="height: 100px; left: 30px; position: absolute; top: 22px; width: 640px; z-index: 1; " class="style_SkipStroke_2 shape-with-text">
              <div class="text-content style_External_640_100 vertical-align-middle-middlebox" style="padding: 0px; ">
                <div class="style_2 vertical-align-middle-innerbox">
                  <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style_3">Send questions or comments to <a title="http://www.twilightlandscapes.com/" href="http://www.twilightlandscapes.com/">Josh Walawender</a> via email at <a title="mailto:jmwalawender@gmail.com?subject=IRAF Tutorial" href="mailto:jmwalawender@gmail.com?subject=IRAF%20Tutorial">jmwalawender@gmail.com</a></p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-11967012-1");
pageTracker._trackPageview();
} catch(err) {}</script>
</body>
</html>


